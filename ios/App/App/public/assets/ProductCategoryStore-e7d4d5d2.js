var u=Object.defineProperty;var h=(t,e,a)=>e in t?u(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var r=(t,e,a)=>(h(t,typeof e!="symbol"?e+"":e,a),a);import{a4 as p,a5 as y,a6 as s}from"./index-f92ce253.js";import{P as l}from"./Product-5dbe9562.js";class c{constructor(e){r(this,"id");r(this,"name");r(this,"description");r(this,"created_at");r(this,"updated_at");r(this,"image");Object.assign(this,e)}}const i=new p,g="kola.product-categories",w=y("productCategory",{state:()=>({categories:[],selectedCategory:null,categoryProducts:[]}),actions:{async loadFromStorage(){const t=await i.get(g);return t&&(this.categories=t.map(e=>new c(e))),this.categories},async fetchCategories(){return await this.loadFromStorage(),this.categories.length>0?this.categories:s.get("/v2/product-categories").then(t=>{this.categories=t.data.data.map(e=>new c(e)),i.set(g,this.categories)}).catch(t=>{console.log(t)})},async getCategories(){return this.categories.length==0&&await this.fetchCategories(),this.categories},async getCategory(t){return(await this.getCategories()).find(a=>a.id==t)},setSelectedCategory(t){this.selectedCategory=t},async fetchCategoryProducts(t,e=1,a=50){try{const o={product_categories_id:t.id,limit:a,page:e,sort:"latest"},n=await s.get("/v2/products",{params:o});return this.categoryProducts=n.data.data.map(d=>new l(d)),this.categoryProducts}catch(o){return console.log(o),[]}}}});export{c as P,w as u};
