System.register(["./index-legacy-cc225d81.js","./KolaYellowButton-legacy-095e43ab.js","./useGeolocation-legacy-82c446db.js","./form-legacy-bf32c8f1.js","./index-legacy-d3e52be1.js"],(function(e,l){"use strict";var a,o,n,t,s,i,d,u,r,c,m,f,p,b,h,_,g,v,y,k,C,V,I,$,x,U,P,w,j,q,S,N,A,B,z,L,M,E,H;return{setters:[e=>{a=e.a5,o=e.a,n=e.a6,t=e.C,s=e.d,i=e.v,d=e.aj,u=e.u,r=e.z,c=e.o,m=e.c,f=e.w,p=e.e,b=e.b,h=e.k,_=e.p,g=e.F,v=e.j,y=e.bp,k=e.G,C=e.g,V=e.t,I=e.f,$=e.l,x=e.K,U=e.r,P=e.L,w=e.M,j=e.U,q=e.bq,S=e.V,N=e.h,A=e.W,B=e.I,z=e.i,L=e._},e=>{M=e.K},e=>{E=e.u},e=>{H=e.u},null],execute:function(){var l=document.createElement("style");l.textContent="ion-input[data-v-240a2fad]{color:#74787c;--padding-end: 10px;--padding-start: 10px}.use-location[data-v-240a2fad]{--color: #666eed;--padding-start: 0px}h6[data-v-240a2fad]{font-size:12px;font-weight:400;line-height:16px;color:#74787c}\n",document.head.appendChild(l);const K=a("customer",{state:()=>({customers:[]}),actions:{async createBusinessCustomer(e){var l;const a=o();return n.post(`/v2/businesses/${null===(l=a.activeBusiness)||void 0===l?void 0:l.id}/customers`,e).then((e=>{if(e.status>=200&&e.status<300)return e.data.data})).catch((e=>t(e)))}}});e("default",L(s({__name:"AddCustomer",setup(e){const l=i(),a=K(),o=d(),n=u(),t=H({name:"",location:"",business_name:"",phone_number:"",cms_users_id:1,payment_method:""}),s=r((()=>o.fullPath.includes("vendor")?"/vendor/profile":"/shopper/profile")),L=r((()=>{const e=t.fields;return e.name.length>0&&e.business_name.length>0&&e.location.length>0&&0==isNaN(Number(e.cms_users_id))&&e.phone_number.length>0&&e.payment_method})),F=async()=>{try{l.blockUI("Hold On As We Add Your Customer"),await a.createBusinessCustomer({...t.fields,business_types_id:1})?(l.unblockUI(),n.push(`${s.value}/company/customers`),l.showSuccess("Customer has been added successfully")):(l.unblockUI(),l.showError("Failed to add Customer. Please try again","","bottom","footer"))}catch(e){}finally{l.unblockUI()}};return(e,l)=>(c(),m(b(z),null,{default:f((()=>[p(b(h),{class:"ion-padding ion-no-border"},{default:f((()=>[p(b(h),{class:"inner-header ion-no-border"},{default:f((()=>[p(b(_),{class:"ion-align-items-center"},{default:f((()=>[p(b(g),{slot:"start"},{default:f((()=>[p(b(v),{color:"dark",icon:b(y),text:"",style:{"margin-left":"10px"},defaultHref:`${s.value}/company/customers`},null,8,["icon","defaultHref"])])),_:1}),p(b(k),{size:"small",class:"fw-bold"},{default:f((()=>[C(V(e.$t("profile.customers.addCustomer")),1)])),_:1})])),_:1})])),_:1})])),_:1}),p(b(B),{class:"ion-padding"},{default:f((()=>[I("form",{onSubmit:l[13]||(l[13]=A((e=>F()),["prevent"]))},[p(b($),{class:x(["kola-input ion-margin-bottom",{"ion-invalid ion-touched":b(t).errors.name}]),label:e.$t("profile.customers.fullName"),labelPlacement:"stacked",fill:"solid",modelValue:b(t).fields.name,"onUpdate:modelValue":l[0]||(l[0]=e=>b(t).fields.name=e),name:"name",onIonInput:l[1]||(l[1]=e=>b(t).validate(e)),required:""},null,8,["class","label","modelValue"]),p(b($),{class:x(["kola-input ion-margin-bottom",{"ion-invalid ion-touched":b(t).errors.business_name}]),label:e.$t("profile.customers.businessName"),labelPlacement:"stacked",fill:"solid",modelValue:b(t).fields.business_name,"onUpdate:modelValue":l[2]||(l[2]=e=>b(t).fields.business_name=e),name:"business_name",onIonInput:l[3]||(l[3]=e=>b(t).validate(e)),required:""},null,8,["class","label","modelValue"]),p(b($),{class:x(["kola-input",{"ion-invalid ion-touched":b(t).errors.location}]),label:e.$t("profile.customers.businessLocation"),labelPlacement:"stacked",fill:"solid",modelValue:b(t).fields.location,"onUpdate:modelValue":l[4]||(l[4]=e=>b(t).fields.location=e),name:"business_location",onIonInput:l[5]||(l[5]=e=>b(t).validate(e)),required:""},null,8,["class","label","modelValue"]),p(b(U),{fill:"clear",size:"small",style:{"text-transform":"none"},class:"ion-margin-bottom use-location ion-text-start",onClick:l[6]||(l[6]=e=>(async()=>{const e=i(),{getCurrentLocation:l}=E();try{const e=await l();e&&(t.fields.location=`${e.coords.latitude}, ${e.coords.longitude}`)}catch(a){e.showError("Cannot retrieve location info")}})())},{default:f((()=>[p(b(P),{icon:b(w),style:{"margin-right":"5px"}},null,8,["icon"]),C(" "+V(e.$t("profile.customers.location.useCurrentLocation")),1)])),_:1}),p(b($),{class:x(["kola-input ion-margin-bottom",{"ion-invalid ion-touched":b(t).errors.phone_number}]),label:"Phone Number",labelPlacement:"stacked",fill:"solid",modelValue:b(t).fields.phone_number,"onUpdate:modelValue":l[7]||(l[7]=e=>b(t).fields.phone_number=e),name:"phone",onIonInput:l[8]||(l[8]=e=>b(t).validate(e)),required:""},null,8,["class","modelValue"]),I("h6",null,V(e.$t("profile.customers.assignToSalesAgentOrManager")),1),p(b(j),{class:x(["kola-input ion-margin-bottom",{"ion-invalid ion-touched":b(t).errors.cms_users_id}]),label:e.$t("profile.customers.selectSaleAgent"),labelPlacement:"stacked",fill:"solid",modelValue:b(t).fields.cms_users_id,"onUpdate:modelValue":l[9]||(l[9]=e=>b(t).fields.cms_users_id=e),required:"",name:"sales-agent","toggle-icon":b(q),onIonChange:l[10]||(l[10]=e=>b(t).validateSelectInput(e))},{default:f((()=>[p(b(S))])),_:1},8,["label","class","modelValue","toggle-icon"]),I("h6",null,V(e.$t("profile.customers.howDoTheyUsuallyPay")),1),p(b(j),{class:x(["kola-input ion-margin-bottom",{"ion-invalid ion-touched":b(t).errors.payment_method}]),label:e.$t("profile.customers.selectPaymentMethod"),labelPlacement:"stacked","toggle-icon":b(q),fill:"solid",modelValue:b(t).fields.payment_method,"onUpdate:modelValue":l[11]||(l[11]=e=>b(t).fields.payment_method=e),required:"",name:"payment-method",onIonChange:l[12]||(l[12]=e=>b(t).validateSelectInput(e))},{default:f((()=>[p(b(S),null,{default:f((()=>[C("Mobile money")])),_:1}),p(b(S),null,{default:f((()=>[C("Cash")])),_:1}),p(b(S),null,{default:f((()=>[C("Bank transfer")])),_:1})])),_:1},8,["label","class","toggle-icon","modelValue"]),p(b(N),{class:"ion-padding-top ion-no-border"},{default:f((()=>[p(M,{disabled:!L.value,onClick:A(F,["prevent"])},{default:f((()=>[C(V(e.$t("profile.customers.save")),1)])),_:1},8,["disabled","onClick"])])),_:1})],32)])),_:1})])),_:1}))}}),[["__scopeId","data-v-240a2fad"]]))}}}));
