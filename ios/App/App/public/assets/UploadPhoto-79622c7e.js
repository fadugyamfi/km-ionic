import{a7 as H,y as N,a8 as P,d as x,i as O,k as V,p as G,F as j,j as E,G as M,I as q,H as J,J as L,h as Y,Q as z,r as Q,s as W,v as K,a as X,C as Z,_ as oo,x as n,o as m,c as g,w as c,e as s,f as d,B as v,g as to,t as eo}from"./index-f92ce253.js";import{F as no}from"./FooterNavigation-702824f8.js";import{H as ao}from"./HeaderArea-a6edf1a2.js";import{r as so,C as io}from"./index-ee3c01c5.js";import{F as w,D as ro}from"./index-bde9bf13.js";import{u as co}from"./BusinessStore-3612150a.js";var f;(function(o){o.Prompt="PROMPT",o.Camera="CAMERA",o.Photos="PHOTOS"})(f||(f={}));var C;(function(o){o.Rear="REAR",o.Front="FRONT"})(C||(C={}));var I;(function(o){o.Uri="uri",o.Base64="base64",o.DataUrl="dataUrl"})(I||(I={}));const y=so("Camera",{web:()=>H(()=>import("./web-65d67576.js"),["assets/web-65d67576.js","assets/index-ee3c01c5.js","assets/index-f92ce253.js","assets/index-5f25435d.css","assets/FooterNavigation-702824f8.js","assets/KolaWhiteButton-71dee6cb.js","assets/KolaWhiteButton-4cf8bc69.css","assets/KolaYellowButton-490da95d.js","assets/KolaYellowButton-24099325.css","assets/HeaderArea-a6edf1a2.js","assets/HeaderArea-b37590df.css","assets/index-bde9bf13.js","assets/BusinessStore-3612150a.js","assets/Product-5dbe9562.js"]).then(o=>new o.CameraWeb)}),k=()=>{const o=N([]),t=async()=>{const e=await y.getPhoto({resultType:I.Uri,source:f.Camera,quality:100}),i={filepath:Date.now()+".jpeg",webviewPath:e.webPath,base64Data:await p(e)};o.value=[i,...o.value]},l=async()=>{const e=await y.pickImages({height:1024,width:2048});o.value=await Promise.all(e.photos.map(async a=>({filepath:a.path,webviewPath:a.webPath,base64Data:await p(a)})))},u=e=>new Promise((a,i)=>{const r=new FileReader;r.onerror=i,r.onload=()=>{a(r.result)},r.readAsDataURL(e)}),p=async e=>{const i=await(await fetch(e.webPath)).blob();return await u(i)};return{photos:o,takePhoto:t,getPhotoAsBase64:p,savePicture:async(e,a)=>{let i;P("hybrid")?i=(await w.readFile({path:e.path})).data:i=await p(e);const r=await w.writeFile({path:a,data:i,directory:ro.Data});return P("hybrid")?{filepath:r.uri,webviewPath:io.convertFileSrc(r.uri)}:{filepath:a,webviewPath:e.webPath}},pickImages:l}},lo=x({components:{IonPage:O,IonHeader:V,IonToolbar:G,IonButtons:j,IonBackButton:E,IonTitle:M,IonContent:q,IonCard:J,IonCardContent:L,IonFooter:Y,FooterNavigation:no,HeaderArea:ao,IonImg:z,IonButton:Q},data(){return{photo:null}},mounted(){this.businessStore.loadCachedRegistrationInfo()},computed:{...W(co)},methods:{async pickImages(){const{takePhoto:o,photos:t,pickImages:l}=k();try{await l(),this.photo=t.value?t.value[0]:null,this.photo&&(this.businessStore.registration.logo_image=this.photo.base64Data)}catch(u){console.log(u)}},async takePhoto(){const{takePhoto:o,photos:t,pickImages:l}=k();try{await o(),this.photo=t.value?t.value[0]:null,this.photo&&(this.businessStore.registration.logo_image=this.photo.base64Data)}catch(u){console.log(u)}},async onContinue(){const o=K(),t=X();this.businessStore.cacheRegistrationInfo(),o.blockUI(this.$t("Registering Your Business. Please hold"));try{await this.businessStore.createBusinessAsVendor()&&(t.changePin({phone_number:this.businessStore.registration.business_owner_phone,pin:this.businessStore.registration.user.pin,pin_confirmation:this.businessStore.registration.user.pin_confirmation}),this.$router.push("/signup/vendor/signup-complete"))}catch(l){Z(l)}finally{o.unblockUI()}}}}),uo={class:"ion-padding-top"},po=d("p",{class:"font-medium"},"Tap to upload",-1),ho=d("p",{class:"font-medium"},"SVG, PNG, JPG or GIF (max. 2048x1080px)",-1),mo={class:"ion-text-center"};function go(o,t,l,u,p,B){const e=n("IonBackButton"),a=n("IonButtons"),i=n("IonTitle"),r=n("IonToolbar"),_=n("IonHeader"),F=n("HeaderArea"),b=n("IonImg"),S=n("IonCardContent"),T=n("IonCard"),D=n("IonButton"),$=n("IonContent"),R=n("FooterNavigation"),A=n("IonFooter"),U=n("IonPage");return m(),g(U,null,{default:c(()=>[s(_,{class:"ion-no-border"},{default:c(()=>[s(r,null,{default:c(()=>[s(a,{slot:"start"},{default:c(()=>[s(e,{defaultHref:"/signup/vendor/stock-info"})]),_:1}),s(i)]),_:1})]),_:1}),s($,{class:"ion-padding"},{default:c(()=>[s(F,{title:o.$t("signup.vendor.uploadYourProfilePhoto"),subtext:o.$t("signup.vendor.uploadInstructions")},null,8,["title","subtext"]),d("main",uo,[s(T,{color:"light"},{default:c(()=>[o.photo?(m(),g(b,{key:0,src:o.photo.webviewPath,onClick:t[0]||(t[0]=h=>o.pickImages())},null,8,["src"])):v("",!0),o.photo?v("",!0):(m(),g(S,{key:1,onClick:t[1]||(t[1]=h=>o.pickImages()),class:"d-flex ion-justify-content-center ion-align-items-center flex-column",style:{height:"200px"}},{default:c(()=>[s(b,{src:"/images/vendor/featured-image.svg",style:{width:"64px","margin-bottom":"15px"}}),po,ho]),_:1}))]),_:1}),d("p",mo,[s(D,{color:"primary",onClick:t[2]||(t[2]=h=>o.takePhoto())},{default:c(()=>[to(eo("Take Photo"))]),_:1})])])]),_:1}),s(A,{class:"ion-padding ion-no-border"},{default:c(()=>[s(R,{onContinue:t[3]||(t[3]=h=>o.onContinue())})]),_:1})]),_:1})}const fo=oo(lo,[["render",go]]),Co=Object.freeze(Object.defineProperty({__proto__:null,default:fo},Symbol.toStringTag,{value:"Module"}));export{f as C,Co as U,C as a};
