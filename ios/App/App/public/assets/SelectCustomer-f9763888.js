import{d as V,i as Y,k as P,p as z,F as U,r as j,j as q,L as D,G,I as J,ax as Q,N as X,aT as M,q as O,ad as W,bd as Z,n as x,h as ee,Q as oe,m as ne,bl as te,bm as se,ae,aI as re,as as le,aJ as ie,s as ce,a as de,v as ue,_ as me,x as o,o as r,c as i,w as t,f as c,e as n,t as l,ao as Ie,B as d,A as _,g as u,X as fe,Y as he}from"./index-f92ce253.js";import{u as pe}from"./SaleStore-6ada4812.js";import{u as _e}from"./BusinessStore-3612150a.js";import{K as ge}from"./KolaYellowButton-490da95d.js";import{I as be}from"./Image-ab8c6f04.js";import"./Product-5dbe9562.js";import"./Date-1419e6d2.js";import"./index-bde9bf13.js";import"./index-ee3c01c5.js";const Ce=V({components:{IonPage:Y,IonHeader:P,IonToolbar:z,IonButtons:U,IonButton:j,IonBackButton:q,IonIcon:D,IonTitle:G,IonContent:J,IonList:Q,IonItem:X,IonListHeader:M,IonLabel:O,IonAvatar:W,IonCheckbox:Z,IonText:x,IonFooter:ee,KolaYellowButton:ge,IonImg:oe,Image:be,IonSpinner:ne,IonRefresher:te,IonRefresherContent:se,IonSearchbar:ae},data(){return{search:re,close:le,arrowBack:ie,fetching:!1,refreshing:!1,searchEnabled:!0,customers:[]}},computed:{...ce(pe)},methods:{async handleRefresh(e){this.refreshing=!0,await this.fetchCustomers(),this.refreshing=!1,e.target.complete()},async fetchCustomers(e={}){this.fetching=!0;const a=de(),m=_e();this.customers=await m.getBusinessCustomers(a.activeBusiness,300,e,this.refreshing),this.fetching=!1},selectCustomer(e){this.saleStore.newSale.customer_id=e.id},onContinue(){if(!this.saleStore.newSale.customer_id){ue().showError(this.$t("vendor.sales.selectCustomerToContinue"),"","bottom","customer-continue");return}this.$router.push("/vendor/sales/add-sale/select-products")},async onSearch(e){this.refreshing=!0,await this.fetchCustomers({name_like:e.target.value}),this.refreshing=!1}},mounted(){this.fetchCustomers()}}),Se={class:"ion-padding",style:{"padding-bottom":"0.35em"}},ke={key:0,class:"ion-text-center ion-padding"},Be={class:"ion-no-margin"};function ve(e,a,m,we,ye,Te){const g=o("IonBackButton"),I=o("IonButtons"),b=o("IonTitle"),C=o("IonIcon"),S=o("ion-button"),f=o("IonToolbar"),h=o("IonHeader"),k=o("IonSearchbar"),B=o("IonRefresherContent"),v=o("IonRefresher"),w=o("IonSpinner"),p=o("IonLabel"),y=o("IonListHeader"),T=o("Image"),$=o("IonAvatar"),L=o("IonText"),R=o("IonCheckbox"),H=o("IonItem"),E=o("IonList"),K=o("IonContent"),F=o("KolaYellowButton"),N=o("IonFooter"),A=o("IonPage");return r(),i(A,null,{default:t(()=>[c("section",Se,[n(h,{classs:"ion-no-border",style:{"box-shadow":"none"}},{default:t(()=>[n(h,{class:"inner-header"},{default:t(()=>[n(f,null,{default:t(()=>[n(I,{slot:"start"},{default:t(()=>[n(g,{defaultHref:"/vendor/sales/add-sale/select-payment-mode",icon:e.arrowBack,mode:"md"},null,8,["icon"])]),_:1}),n(b,{size:"small"},{default:t(()=>[c("b",null,l(e.$t("vendor.sales.addSale")),1)]),_:1}),n(I,{slot:"end"},{default:t(()=>[n(S,{onClick:a[0]||(a[0]=s=>e.searchEnabled=!e.searchEnabled),color:"dark"},{default:t(()=>[n(C,{icon:e.search},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}),e.searchEnabled?(r(),i(f,{key:0},{default:t(()=>[n(k,{placeholder:e.$t("vendor.sales.searchCustomers")+"...",class:"search-input",onKeyup:a[1]||(a[1]=Ie(s=>e.onSearch(s),["enter"])),onIonChange:a[2]||(a[2]=s=>e.onSearch(s))},null,8,["placeholder"])]),_:1})):d("",!0)]),_:1})]),n(K,null,{default:t(()=>[n(v,{ref:"refresher",slot:"fixed",onIonRefresh:a[3]||(a[3]=s=>e.handleRefresh(s))},{default:t(()=>[n(B,{pullingIcon:"crescent"})]),_:1},512),e.fetching?(r(),_("div",ke,[n(w,{name:"crescent"})])):d("",!0),e.fetching?d("",!0):(r(),i(E,{key:1,lines:"none",class:"ion-padding-horizontal sales-select-list simple"},{default:t(()=>[n(y,null,{default:t(()=>[n(p,{class:"fw-bold"},{default:t(()=>[u(l(e.$t("vendor.sales.selectCustomer")),1)]),_:1})]),_:1}),(r(!0),_(he,null,fe(e.customers,s=>(r(),i(H,{key:s.id,onClick:$e=>e.selectCustomer(s)},{default:t(()=>[n($,{slot:"start"},{default:t(()=>[n(T,{src:s.logo},null,8,["src"])]),_:2},1024),n(p,null,{default:t(()=>[c("p",Be,l(s.name),1),n(L,{color:"medium",class:"font-medium"},{default:t(()=>[u(l(s.location||"Location Unknown"),1)]),_:2},1024)]),_:2},1024),n(R,{"aria-label":s.name,slot:"end",mode:"ios",value:s.id,checked:e.saleStore.newSale.customer_id==s.id},null,8,["aria-label","value","checked"])]),_:2},1032,["onClick"]))),128))]),_:1}))]),_:1}),n(N,{class:"ion-padding ion-no-border"},{default:t(()=>[n(F,{id:"customer-continue",disabled:!e.saleStore.newSale.customer_id,onClick:a[4]||(a[4]=s=>e.onContinue())},{default:t(()=>[u(l(e.$t("general.continue")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})}const Ye=me(Ce,[["render",ve]]);export{Ye as default};
