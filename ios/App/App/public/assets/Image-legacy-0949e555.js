System.register(["./index-legacy-cc225d81.js","./index-legacy-92c3b46a.js"],(function(e,t){"use strict";var a,o,i,n,r,s,c,d,l,m;return{setters:[e=>{a=e.d,o=e.Q,i=e.ac,n=e.a4,r=e._,s=e.x,c=e.o,d=e.c},e=>{l=e.F,m=e.D}],execute:function(){var t=document.createElement("style");t.textContent="ion-img[data-v-932e4132]{object-fit:cover;object-position:center}\n",document.head.appendChild(t);const g=new n,h=a({components:{IonImg:o,IonSkeletonText:i},props:{src:{type:String},noImgSrc:{default:"/images/no-image.png",type:String}},data:()=>({loaded:!1,imageData:null}),emits:["loaded"],methods:{onLoadError(e){e.target.src=this.noImgSrc},onLoaded(){this.loaded=!0,this.$emit("loaded")},convertBlobToBase64:async e=>new Promise(((t,a)=>{const o=new FileReader;o.onerror=a,o.onload=()=>{t(o.result)},o.readAsDataURL(e)})),async loadImage(){var e;if(!this.src)return;if(this.src.includes(";base64"))return void(this.imageData=this.src);const t=this.src,a=t.split("/").pop()||(null===(e=crypto)||void 0===e?void 0:e.randomUUID())||"img-"+(new Date).getTime();null==a||a.split(".").pop();const o=await g.get(`image:${t}`);if(o){const e=await l.readFile({path:o.filepath,directory:m.Cache});if(e)return void(this.imageData=`${e.data}`)}const i=await this.saveImage(t,a);this.imageData=`${i.base64Data}`,g.set(`image:${t}`,{filepath:i.filepath,webviewPath:i.webviewPath},1,"year")},async saveImage(e,t){const a=await fetch(e),o=await a.blob(),i=await this.convertBlobToBase64(o);return await l.writeFile({path:t,data:i,directory:m.Cache}),{filepath:t,webviewPath:e,base64Data:i}}},mounted(){setTimeout((()=>{this.imageData=this.src}),200)}});e("I",r(h,[["render",function(e,t,a,o,i,n){const r=s("IonImg");return c(),d(r,{src:e.imageData||e.noImgSrc,onIonError:t[0]||(t[0]=t=>e.onLoadError(t)),onIonImgDidLoad:t[1]||(t[1]=t=>e.onLoaded())},null,8,["src"])}],["__scopeId","data-v-932e4132"]]))}}}));
