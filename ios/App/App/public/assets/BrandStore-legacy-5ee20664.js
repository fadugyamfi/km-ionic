!function(){function t(t,r,a){return(r=function(t){var r=function(t,r){if("object"!=typeof t||null===t)return t;var a=t[Symbol.toPrimitive];if(void 0!==a){var s=a.call(t,r||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof r?r:String(r)}(r))in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}System.register(["./index-legacy-cc225d81.js","./Product-legacy-3e97f985.js"],(function(r,a){"use strict";var s,e,i,n,d,o;return{setters:[t=>{s=t.a4,e=t.a5,i=t.a6,n=t.C,d=t.v},t=>{o=t.P}],execute:function(){class a{constructor(r){t(this,"id",void 0),t(this,"name",void 0),t(this,"description",void 0),t(this,"created_at",void 0),t(this,"updated_at",void 0),t(this,"logo",void 0),t(this,"favorited",void 0),Object.assign(this,r)}addToFavorites(t){this.favorited=t||{brands_id:this.id}}unfavorite(){this.favorited=null}getInitials(t=3){var r;return null===(r=this.name)||void 0===r?void 0:r.split(" ").map((t=>t[0])).join("").toUpperCase().substring(0,t)}}r("B",a);const c=new s,u="kola.brands";r("u",e("brand",{state:()=>({brands:[],selectedBrand:null,brandProducts:[]}),actions:{async persist(){c.set(u,this.brands)},async loadFromStorage(){const t=await c.get(u);return t&&(this.brands=t.map((t=>new a(t)))),this.brands},async fetchBrands(){return await this.loadFromStorage(),this.brands.length>0?this.brands:i.get("/v2/brands").then((t=>{this.brands=t.data.data.map((t=>new a(t))),this.persist()})).catch((t=>{console.log(t)}))},async getBrands(){return 0==this.brands.length&&await this.fetchBrands(),this.brands},async getBrand(t){return(await this.getBrands()).find((r=>r.id==t))},setSelectedBrand(t){this.selectedBrand=t},async fetchBrandProducts(t,r=1,a=50){try{const s={brands_id:t.id,limit:a,page:r,sort:"latest"},e=await i.get("/v2/products",{params:s});return this.brandProducts=e.data.data.map((t=>new o(t))),this.brandProducts}catch(s){return n(s),[]}},async addToFavorites(t){const r=d();t.addToFavorites();try{const a=(await i.post(`/v2/brands/${t.id}/favorites`)).data.data;t.addToFavorites({brands_id:t.id,cms_users_id:a.cms_users_id}),r.showSuccess("Added To Favorites"),this.persist()}catch(a){n(a),t.unfavorite()}},async removeFromFavorites(t){const r=d();t.unfavorite();try{await i.delete(`/v2/brands/${t.id}/favorites`);r.showError("Removed From Favorites"),this.persist()}catch(a){n(a),t.addToFavorites()}}}}))}}}))}();
