System.register(["./index-legacy-cc225d81.js","./Order-legacy-de27059d.js"],(function(e,s){"use strict";var r,t,d,a,o,i,c;return{setters:[e=>{r=e.v,t=e.a4,d=e.a5,a=e.a,o=e.a6,i=e.C},e=>{c=e.O}],execute:function(){const s=r();new t,e("u",d("order",{state:()=>({orders:[new c({id:1,businesses_id:71,customer_id:72,start_dt:"2023-10-25 10:00:00",created_at:"2023-10-25 10:00:00",due_date:"2023-11-01",order_status_id:8,order_status:{id:8,name:"Cancelled"}})]}),actions:{async fetchPlacedOrders(e={}){const s=a();try{var r;const t={customer_id:null===(r=s.activeBusiness)||void 0===r?void 0:r.id,limit:50,...e},d=await o.get("/v2/orders",{params:t});if(200===d.status){const e=d.data.data;this.orders=e.map((e=>new c(e)))}}catch(t){i(t)}},async fetchReceivedOrders(e={}){try{var s;const r={businesses_id:null===(s=a().activeBusiness)||void 0===s?void 0:s.id,limit:50,...e},t=await o.get("/v2/orders",{params:r});if(200===t.status){const e=t.data.data;this.orders=e.map((e=>new c(e)))}}catch(r){i(r)}},async fetchOrder(e){try{const s=await o.get(`/v2/orders/${e}`);return 200==s.status?new c(s.data.data):null}catch(s){return i(s),null}},async deleteOrder(e){try{204===(await o.delete(`/v2/orders/${e}`)).status&&(this.orders=this.orders.filter((s=>s.id!==e)),s.showSuccess("Order deleted successfully."))}catch(r){i(r),s.showError("Failed to delete order.")}},async updateOrder(e,r){try{const t=await o.put(`/v2/orders/${e}`,r);if(200===t.status){const r=this.orders.findIndex((s=>s.id===e));-1!==r&&(this.orders[r]=new c(t.data.data),s.showSuccess("Order updated successfully."))}}catch(t){i(t),s.showError("Failed to update order.")}},async editOrder(e,r){try{const t=await o.put(`/v2/orders/${e}`,r);if(200===t.status){const r=this.orders.findIndex((s=>s.id===e));-1!==r&&(this.orders[r]=new c(t.data.data),s.showSuccess("Order edited successfully."))}}catch(t){i(t),s.showError("Failed to edit order.")}},async reorderOrder(e){try{const r=this.orders.find((s=>s.id===e));if(!r)return void s.showError("Order not found for reorder.");const t={businesses_id:r.businesses_id,customer_id:r.customer_id},d=await o.post("/v2/orders",t);if(201===d.status){const e=d.data.data,r=new c(e);this.orders.push(r),s.showSuccess("Order reordered successfully.")}}catch(r){i(r),s.showError("Failed to reorder order.")}}}}))}}}));
