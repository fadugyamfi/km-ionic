import{d as D,ad as W,ar as $,L as B,N as X,q as F,ax as Y,az as Z,I as L,ac as x,r as M,ap as ee,n as te,s as N,aE as oe,bg as ne,aG as P,aH as se,a$ as ae,_ as T,x as n,o as u,c as _,w as o,A as re,X as ie,Y as le,e as t,g as a,aI as de,aJ as ce,aK as ue,aL as pe,aM as me,i as _e,k as he,p as fe,aN as Ie,aO as ge,F as ve,j as Oe,G as Se,m as be,C as we,t as O,aP as k,aQ as C,f as y,B as ke}from"./index-f92ce253.js";import{N as Ce}from"./NotificationButton-bfbf6cba.js";import{u as H}from"./OrderStore-6d589189.js";import{f as R}from"./Filters-875bda85.js";import{I as ye}from"./Image-ab8c6f04.js";import{O as De,F as $e}from"./FilterOrdersSheet-e5f62342.js";import{f as S}from"./Date-1419e6d2.js";import{N as Be}from"./NoResults-eb849132.js";import"./KolaYellowButton-490da95d.js";import"./disappointed-59090e3a.js";import"./Order-423a7fc9.js";import"./Product-5dbe9562.js";import"./Number-6d4d03a9.js";import"./index-bde9bf13.js";import"./index-ee3c01c5.js";const Fe=D({props:{orders:{type:Array,required:!0}},components:{IonAvatar:W,IonBadge:$,IonIcon:B,IonItem:X,IonLabel:F,IonList:Y,IonPopover:Z,IonContent:L,IonSkeletonText:x,IonButton:M,IonChip:ee,IonText:te,Image:ye,OrderListItem:De},computed:{...N(H)},data(){return{chatbubbleOutline:oe,closeCircleOutline:ne,ellipsisHorizontal:P,trashOutline:se,checkmark:ae,event:null,openPopover:-1,selectedOrder:null,showConfirmDeleteModal:!1,filters:R}},methods:{getStatusInfo(e){switch(e){case 1:return{color:"primary",label:"Processing"};case 2:case 3:case 4:case 5:case 6:return{color:"warning",label:"Pending"};case 7:return{color:"success",label:"Completed"};case 8:case 9:case 10:return{color:"danger",label:"Cancelled"};default:return{color:"medium",label:"Default"}}},openMenu(e,s=-1){this.event=e,this.openPopover=s},closeMenu(){this.openPopover=-1,this.event=null},deleteSale(e){this.selectedOrder=e,this.showConfirmDeleteModal=!0,this.closeMenu()},async onConfirmDelete(){var e;this.showConfirmDeleteModal=!1,await this.orderStore.deleteOrder((e=this.selectedOrder)==null?void 0:e.id)},viewDetails(e){this.$emit("view-details",e),this.$router.push("/vendor/orders/".concat(e.id))}}});function Le(e,s,h,b,A,E){const l=n("ion-icon"),r=n("ion-item"),p=n("IonList"),f=n("IonContent"),I=n("IonPopover"),g=n("OrderListItem");return u(),_(p,{lines:"full"},{default:o(()=>[(u(!0),re(le,null,ie(e.orders,(d,m)=>(u(),_(g,{key:d.id,order:d,onClick:i=>e.viewDetails(d),onOpenMenu:i=>e.openMenu(i,m)},{popover:o(()=>[t(I,{event:e.event,isOpen:e.openPopover==m,onDidDismiss:s[0]||(s[0]=i=>e.openPopover=-1)},{default:o(()=>[t(f,{class:"ion-no-padding"},{default:o(()=>[t(p,{lines:"full",class:"ion-no-padding"},{default:o(()=>[t(r,{button:!0,lines:"full","aria-label":"sync"},{default:o(()=>[t(l,{slot:"start",icon:e.checkmark,"aria-hidden":"true"},null,8,["icon"]),a(" Accept Order ")]),_:1}),t(r,{button:!0,lines:"full"},{default:o(()=>[t(l,{slot:"start",icon:e.closeCircleOutline},null,8,["icon"]),a(" Cancel Order ")]),_:1}),t(r,{button:!0,lines:"full"},{default:o(()=>[t(l,{slot:"start",icon:e.chatbubbleOutline},null,8,["icon"]),a(" Message Customer ")]),_:1}),t(r,{button:!0,lines:"full"},{default:o(()=>[t(l,{slot:"start",icon:e.trashOutline},null,8,["icon"]),a(" Delete ")]),_:1})]),_:1})]),_:1})]),_:2},1032,["event","isOpen"])]),_:2},1032,["order","onClick","onOpenMenu"]))),128))]),_:1})}const Me=T(Fe,[["render",Le],["__scopeId","data-v-1c764078"]]),Ne=D({data(){return{search:de,arrowBack:ce,ellipsisHorizontal:P,filter:ue,optionsOutline:pe,add:me,fetching:!1,filters:R,showFilterSheet:!1,searchFilters:{start_dt:"",end_dt:""}}},components:{IonPage:_e,IonHeader:he,IonToolbar:fe,IonContent:L,IonSegmentButton:Ie,IonSegment:ge,IonLabel:F,IonButtons:ve,IonBackButton:Oe,IonBadge:$,IonTitle:Se,ReceivedOrderList:Me,NotificationButton:Ce,IonButton:M,IonIcon:B,FilterOrdersSheet:$e,NoResults:Be,IonSpinner:be},computed:{...N(H)},methods:{async fetchOrders(){try{this.fetching=!0,await this.orderStore.fetchReceivedOrders(this.searchFilters)}catch(e){we(e)}finally{this.fetching=!1}},onSegmentChanged(e){let s=new Date,h=new Date;switch(e.detail.value){case"pastmonth":s.setMonth(s.getMonth()-1);break;case"today":s.setDate(s.getDate()-1);break;case"thisweek":s.setDate(s.getDate()-7);break}this.searchFilters.start_dt=S(s.toISOString()),this.searchFilters.end_dt=S(h.toISOString()),this.fetchOrders()},onFilterUpdate(e){this.searchFilters.start_dt=e.start_dt,this.searchFilters.end_dt=e.end_dt||S(new Date().toISOString()),this.fetchOrders()}},mounted(){this.onSegmentChanged(new CustomEvent("load",{detail:{value:"thisweek"}}))}});const Pe={class:"ion-padding ion-text-center"};function Te(e,s,h,b,A,E){const l=n("ion-back-button"),r=n("ion-buttons"),p=n("IonTitle"),f=n("IonIcon"),I=n("IonButton"),g=n("NotificationButton"),d=n("ion-toolbar"),m=n("ion-header"),i=n("IonLabel"),v=n("IonSegmentButton"),V=n("IonSegment"),q=n("IonToolbar"),z=n("IonHeader"),U=n("IonSpinner"),G=n("NoResults"),Q=n("ReceivedOrderList"),j=n("FilterOrdersSheet"),J=n("ion-content"),K=n("ion-page");return u(),_(K,null,{default:o(()=>[t(z,{class:"ion-padding ion-no-border"},{default:o(()=>[t(m,{class:"inner-header"},{default:o(()=>[t(d,{class:"ion-align-items-center"},{default:o(()=>[t(r,{slot:"start"},{default:o(()=>[t(l,{defaultHref:"/shopper/home"})]),_:1}),t(p,{size:"small",class:"fw-bold"},{default:o(()=>[a("Order History")]),_:1}),t(r,{slot:"end"},{default:o(()=>[t(I,{onClick:s[0]||(s[0]=c=>e.showFilterSheet=!0),color:"dark"},{default:o(()=>[t(f,{icon:e.optionsOutline},null,8,["icon"])]),_:1}),t(g)]),_:1})]),_:1})]),_:1}),t(q,null,{default:o(()=>[t(V,{value:"thisweek",mode:"ios",onIonChange:s[1]||(s[1]=c=>e.onSegmentChanged(c))},{default:o(()=>[t(v,{value:"today"},{default:o(()=>[t(i,null,{default:o(()=>[a(O(e.$t("general.today")),1)]),_:1})]),_:1}),t(v,{value:"thisweek"},{default:o(()=>[t(i,null,{default:o(()=>[a(O(e.$t("general.thisWeek")),1)]),_:1})]),_:1}),t(v,{value:"pastmonth"},{default:o(()=>[t(i,null,{default:o(()=>[a(O(e.$t("general.pastMonth")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(J,null,{default:o(()=>{var c;return[k(y("div",Pe,[t(U,{name:"crescent"})],512),[[C,e.fetching]]),k(y("section",null,[((c=e.orderStore.orders)==null?void 0:c.length)==0?(u(),_(G,{key:0})):ke("",!0),t(Q,{orders:e.orderStore.orders},null,8,["orders"])],512),[[C,!e.fetching]]),t(j,{isOpen:e.showFilterSheet,onDidDismiss:s[2]||(s[2]=w=>e.showFilterSheet=!1),onUpdate:s[3]||(s[3]=w=>e.onFilterUpdate(w))},null,8,["isOpen"])]}),_:1})]),_:1})}const Ye=T(Ne,[["render",Te],["__scopeId","data-v-c8c8210e"]]);export{Ye as default};
