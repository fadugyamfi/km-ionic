var Q=Object.defineProperty;var Z=(n,o,c)=>o in n?Q(n,o,{enumerable:!0,configurable:!0,writable:!0,value:c}):n[o]=c;var f=(n,o,c)=>(Z(n,typeof o!="symbol"?o+"":o,c),c);import{d as u,L as g,N as k,q as N,aw as w,a$ as B,aV as O,b0 as C,_ as p,x as t,o as s,c as _,w as i,e,f as b,t as V,ax as T,A as d,X as Y,Y as D,a5 as nn,a6 as tn,I as W,g as S,b1 as on,F as en,r as z,k as sn,p as an,G as cn,aO as rn,aN as ln,m as fn,as as _n,b2 as dn,s as un,b3 as F,B as G,R as pn,S as mn,b4 as In}from"./index-f92ce253.js";import{r as hn}from"./Date-1419e6d2.js";import{K as gn}from"./KolaYellowButton-490da95d.js";import{_ as Nn}from"./disappointed-59090e3a.js";const $n=u({props:["notification"],components:{IonIcon:g,IonItem:k,IonLabel:N},data(){return{checkmarkCircleOutline:w,checkmark:B,checkmarkCircle:O,warningOutline:C}},methods:{format(n){return hn(n)}}});function yn(n,o,c,m,I,h){const a=t("IonIcon"),l=t("IonLabel"),r=t("IonItem");return s(),_(r,{class:"notification-item success"},{default:i(()=>[e(a,{slot:"start",icon:n.checkmarkCircleOutline},null,8,["icon"]),e(l,null,{default:i(()=>{var $,y;return[b("header",null,V(($=n.notification)==null?void 0:$.title),1),b("footer",null,V(n.format((y=n.notification)==null?void 0:y.created_at)),1)]}),_:1})]),_:1})}const M=p($n,[["render",yn],["__scopeId","data-v-c82c15df"]]),vn=u({props:["notifications"],components:{IonList:T,IonItem:k,IonLabel:N,IonIcon:g,NotificationItem:M},data(){return{checkmarkCircleOutline:w,checkmark:B,checkmarkCircle:O,warningOutline:C}}});function bn(n,o,c,m,I,h){const a=t("NotificationItem"),l=t("IonList");return s(),_(l,{lines:"none"},{default:i(()=>[(s(!0),d(D,null,Y(n.notifications,r=>(s(),_(a,{notification:r,key:r.id},null,8,["notification"]))),128))]),_:1})}const Sn=p(vn,[["render",bn]]),kn=u({props:["notifications"],components:{IonList:T,IonItem:k,IonLabel:N,IonIcon:g,NotificationItem:M},data(){return{checkmarkCircleOutline:w,checkmark:B,checkmarkCircle:O,warningOutline:C}}});function wn(n,o,c,m,I,h){const a=t("NotificationItem"),l=t("IonList");return s(),_(l,{lines:"none"},{default:i(()=>[(s(!0),d(D,null,Y(n.notifications,r=>(s(),_(a,{notification:r,key:r.id},null,8,["notification"]))),128))]),_:1})}const Bn=p(kn,[["render",wn]]);class On{constructor(o){f(this,"id",null);f(this,"title",null);f(this,"content",null);f(this,"type",null);f(this,"type_id",null);f(this,"category",null);f(this,"created_at",null);f(this,"notifiable",null);Object.assign(this,o)}}const E=nn("notifications",{state:()=>({notifications:[],fetching:!1}),actions:{async fetchNotifications(){return this.fetching=!0,tn.get("/v2/notifications").then(n=>{this.notifications=n.data.data.map(o=>new On(o))}).finally(()=>this.fetching=!1)},getGeneralNotifications(){return this.notifications.filter(n=>n.type!="Order")},getOrderNotifications(){return this.notifications.filter(n=>n.type=="Order")}}}),Cn=u({components:{IonContent:W,IonLabel:N,KolaYellowButton:gn}}),Ln={class:"ion-padding"},Vn=on('<div class="ion-text-center" style="margin-top:2em;"><img src="'+Nn+'" style="width:150px;height:150px;"></div><div class="ion-text-center ion-margin-bottom"><h5 class="ion-margin-bottom"><b>No Notifications</b></h5><p class="ion-margin-top" style="font-size:0.88em;"> When you have new notifications they will appear here. To get push notifications from Kola, open your phone settings and allow notifications </p></div>',2);function Gn(n,o,c,m,I,h){const a=t("KolaYellowButton");return s(),d("div",Ln,[Vn,e(a,{style:{"margin-top":"30px"}},{default:i(()=>[S("Enable Notifications")]),_:1})])}const En=p(Cn,[["render",Gn]]),Kn=u({components:{IonButtons:en,IonButton:z,IonHeader:sn,IonContent:W,IonToolbar:an,IonTitle:cn,IonLabel:N,IonIcon:g,IonSegment:rn,IonSegmentButton:ln,GeneralNotifications:Sn,OrderNotifications:Bn,EmptyNotifications:En,IonSpinner:fn},data(){return{viewing:"general",name:null,close:_n,refreshOutline:dn}},computed:{...un(E)},methods:{refresh(){this.notificationsStore.fetchNotifications()},cancel(){F.dismiss(null,"cancel")},onWillDismiss(n){n.detail.role}},mounted(){E().fetchNotifications()}});const Tn=n=>(pn("data-v-1719f3ad"),n=n(),mn(),n),Yn={class:"ion-padding"},Dn=Tn(()=>b("b",null,"Notifications",-1)),Wn={key:0,class:"ion-padding ion-text-center"},zn={key:1},Fn={key:1};function Mn(n,o,c,m,I,h){const a=t("IonIcon"),l=t("IonButton"),r=t("ion-buttons"),$=t("ion-title"),y=t("ion-button"),j=t("ion-toolbar"),q=t("ion-header"),x=t("IonSpinner"),A=t("EmptyNotifications"),H=t("IonLabel"),L=t("IonSegmentButton"),R=t("ion-label"),U=t("IonSegment"),X=t("GeneralNotifications"),J=t("OrderNotifications"),P=t("ion-content");return s(),d("section",Yn,[e(q,{class:"inner-header"},{default:i(()=>[e(j,null,{default:i(()=>[e(r,{slot:"start"},{default:i(()=>[e(l,{onClick:o[0]||(o[0]=v=>n.cancel())},{default:i(()=>[e(a,{icon:n.close},null,8,["icon"])]),_:1})]),_:1}),e($,{size:"small"},{default:i(()=>[Dn]),_:1}),e(r,{slot:"end"},{default:i(()=>[e(y,{onClick:o[1]||(o[1]=v=>n.refresh())},{default:i(()=>[e(a,{icon:n.refreshOutline},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}),e(P,{class:"ion-padding-top",fullscreen:!0},{default:i(()=>[n.notificationsStore.fetching?(s(),d("div",Wn,[e(x,{name:"crescent"})])):(s(),d("main",zn,[n.notificationsStore.notifications.length==0?(s(),_(A,{key:0})):(s(),d("section",Fn,[e(U,{value:"personal",mode:"ios",modelValue:n.viewing,"onUpdate:modelValue":o[2]||(o[2]=v=>n.viewing=v)},{default:i(()=>[e(L,{value:"general"},{default:i(()=>[e(H,null,{default:i(()=>[S("General")]),_:1})]),_:1}),e(L,{value:"orders"},{default:i(()=>[e(R,null,{default:i(()=>[S("Orders")]),_:1})]),_:1})]),_:1},8,["modelValue"]),n.viewing=="general"?(s(),_(X,{key:0,notifications:n.notificationsStore.getGeneralNotifications()},null,8,["notifications"])):G("",!0),n.viewing=="orders"?(s(),_(J,{key:1,notifications:n.notificationsStore.getOrderNotifications()},null,8,["notifications"])):G("",!0)]))]))]),_:1})])}const K=p(Kn,[["render",Mn],["__scopeId","data-v-1719f3ad"]]),jn=u({components:{IonButton:z,NotificationsModal:K,IonIcon:g},data(){return{notificationsOutline:In}},methods:{async showNotifications(){const n=await F.create({component:K});n.present(),await n.onWillDismiss()}}});function qn(n,o,c,m,I,h){const a=t("IonIcon"),l=t("IonButton");return s(),_(l,{onClick:o[0]||(o[0]=r=>n.showNotifications())},{default:i(()=>[e(a,{icon:n.notificationsOutline},null,8,["icon"])]),_:1})}const Xn=p(jn,[["render",qn]]);export{Xn as N};
