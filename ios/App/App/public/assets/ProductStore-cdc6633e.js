import{a5 as n,a6 as s,C as o,v as d}from"./index-f92ce253.js";import{P as c}from"./Product-5dbe9562.js";const h=n("product",{state:()=>({products:[],selectedProduct:null,recentlyViewedProducts:[],searchTerm:""}),actions:{async fetchSearchedProducts(t=1,e=50){try{return await this.fetchProducts({product_name_has:this.searchTerm,limit:e,page:t})}catch(r){return[]}},async fetchProducts(t={}){const e={...t};try{const r=await s.get("/v2/products",{params:e});return this.products=this.mapResponseToProducts(r),this.products}catch(r){return o(r),[]}},async fetchRecentlyViewedProducts(t={}){const e={...t};try{const r=await s.get("/v2/products/recently-viewed",{params:e});this.recentlyViewedProducts=r.data.data.map(a=>new c(a.product))}catch(r){o(r)}return this.recentlyViewedProducts},mapResponseToProducts(t){return t.data.data.map(e=>new c(e))},async getProducts(){return this.products.length==0&&await this.fetchProducts(),this.products},async fetchProduct(t){try{const e=await s.get("/v2/products/".concat(t));return new c(e.data.data)}catch(e){return o(e),null}},setSelectedProduct(t){this.selectedProduct=t},async addProductToFavorites(t){const e=d();t.addToFavorites();try{const a=(await s.post("/v2/products/".concat(t.id,"/favorites"))).data.data;t.addToFavorites({products_id:t.id,cms_users_id:a.cms_users_id}),e.showSuccess("Added To Favorites")}catch(r){o(r),t.unfavorite()}},async removeFromFavorites(t){const e=d();t.unfavorite();try{const r=await s.delete("/v2/products/".concat(t.id,"/favorites"));e.showError("Removed From Favorites")}catch(r){o(r),t.addToFavorites()}}}});export{h as u};
