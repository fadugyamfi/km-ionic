System.register(["./index-legacy-cc225d81.js","./Product-legacy-3e97f985.js"],(function(t,e){"use strict";var r,s,c,a,o;return{setters:[t=>{r=t.a5,s=t.a6,c=t.C,a=t.v},t=>{o=t.P}],execute:function(){t("u",r("product",{state:()=>({products:[],selectedProduct:null,recentlyViewedProducts:[],searchTerm:""}),actions:{async fetchSearchedProducts(t=1,e=50){try{return await this.fetchProducts({product_name_has:this.searchTerm,limit:e,page:t})}catch(r){return[]}},async fetchProducts(t={}){const e={...t};try{const t=await s.get("/v2/products",{params:e});return this.products=this.mapResponseToProducts(t),this.products}catch(r){return c(r),[]}},async fetchRecentlyViewedProducts(t={}){const e={...t};try{const t=await s.get("/v2/products/recently-viewed",{params:e});this.recentlyViewedProducts=t.data.data.map((t=>new o(t.product)))}catch(r){c(r)}return this.recentlyViewedProducts},mapResponseToProducts:t=>t.data.data.map((t=>new o(t))),async getProducts(){return 0==this.products.length&&await this.fetchProducts(),this.products},async fetchProduct(t){try{const e=await s.get(`/v2/products/${t}`);return new o(e.data.data)}catch(e){return c(e),null}},setSelectedProduct(t){this.selectedProduct=t},async addProductToFavorites(t){const e=a();t.addToFavorites();try{const r=(await s.post(`/v2/products/${t.id}/favorites`)).data.data;t.addToFavorites({products_id:t.id,cms_users_id:r.cms_users_id}),e.showSuccess("Added To Favorites")}catch(r){c(r),t.unfavorite()}},async removeFromFavorites(t){const e=a();t.unfavorite();try{await s.delete(`/v2/products/${t.id}/favorites`),e.showError("Removed From Favorites")}catch(r){c(r),t.addToFavorites()}}}}))}}}));
