import{d as F,aI as H,aJ as P,bg as V,i as E,k as K,p as N,F as Y,j as G,G as j,r as q,L as x,I as A,H as J,J as O,n as U,ax as z,N as D,aS as Q,q as R,h as W,s as X,v as C,C as Z,_ as M,x as n,o as i,c as S,w as e,f as u,e as t,t as l,g as d,A as oo,X as to,Y as eo}from"./index-f92ce253.js";import{I as no}from"./Image-ab8c6f04.js";import{P as ao}from"./ProductQuantitySelector-3a9f81be.js";import{S as so}from"./SaleItemView-302c8a46.js";import{u as ro}from"./SaleStore-6ada4812.js";import{K as lo}from"./KolaYellowButton-490da95d.js";import"./index-bde9bf13.js";import"./index-ee3c01c5.js";import"./Product-5dbe9562.js";import"./Date-1419e6d2.js";const co=F({data(){return{search:H,arrowBack:P,closeCircleOutline:V}},components:{IonPage:E,IonHeader:K,IonToolbar:N,IonButtons:Y,IonBackButton:G,IonTitle:j,IonButton:q,IonIcon:x,IonContent:A,IonCard:J,IonCardContent:O,IonText:U,IonList:z,IonItem:D,IonThumbnail:Q,Image:no,IonLabel:R,ProductQuantitySelector:ao,SaleItemView:so,IonFooter:W,KolaYellowButton:lo},computed:{...X(ro),cartTotalCost(){var o;return(o=this.saleStore.newSale.sale_items)==null?void 0:o.reduce((a,r)=>a+(r.total_price||0),0)},cartCurrency(){var a,r,c;const o=(a=this.saleStore.newSale.sale_items)==null?void 0:a.at(0);return(c=(r=o==null?void 0:o.product)==null?void 0:r.currency)==null?void 0:c.symbol}},methods:{async onContinue(){if(!this.cartTotalCost){C().showError(this.$t("vendor.sales.cannotProceedWithTotalCostOfZero"),"","bottom","configure-continue");return}const o=C();o.blockUI();try{await this.saleStore.recordSale()?this.$router.push("/vendor/sales/add-sale/sale-confirmation"):o.showError("Failed to record sale","Error","bottom","configure-continue")}catch(a){Z(a)}finally{o.unblockUI()}}}}),io={class:"ion-padding"},uo={class:"d-flex ion-justify-content-between fw-bold"};function mo(o,a,r,c,Io,_o){const B=n("IonBackButton"),m=n("IonButtons"),h=n("IonTitle"),b=n("IonIcon"),g=n("IonButton"),w=n("IonToolbar"),I=n("IonHeader"),_=n("IonText"),p=n("IonCardContent"),f=n("IonCard"),T=n("SaleItemView"),y=n("IonList"),k=n("IonContent"),$=n("KolaYellowButton"),v=n("IonFooter"),L=n("IonPage");return i(),S(L,null,{default:e(()=>[u("section",io,[t(I,{class:"ion-no-border"},{default:e(()=>[t(I,{class:"inner-header"},{default:e(()=>[t(w,null,{default:e(()=>[t(m,{slot:"start"},{default:e(()=>[t(B,{defaultHref:"/vendor/sales/add-sale/select-products",icon:o.arrowBack,mode:"md"},null,8,["icon"])]),_:1}),t(h,{size:"small"},{default:e(()=>[u("b",null,l(o.$t("vendor.sales.addSale")),1)]),_:1}),t(m,{slot:"end"},{default:e(()=>[t(g,{color:"dark",style:{opacity:"0"}},{default:e(()=>[t(b,{icon:o.search,color:"dark"},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}),t(f,{class:"ion-no-margin ion-margin-top"},{default:e(()=>[t(p,null,{default:e(()=>[u("section",uo,[t(_,null,{default:e(()=>[d(l(o.$t("general.totalCost")),1)]),_:1}),t(_,null,{default:e(()=>{var s;return[d(l((s=o.cartTotalCost)==null?void 0:s.toLocaleString("en-GB",{style:"currency",currency:o.cartCurrency||"GHS"})),1)]}),_:1})])]),_:1})]),_:1})]),_:1})]),t(k,null,{default:e(()=>[t(f,null,{default:e(()=>[t(p,null,{default:e(()=>[t(y,{lines:"full"},{default:e(()=>[(i(!0),oo(eo,null,to(o.saleStore.newSale.sale_items,s=>(i(),S(T,{key:s.products_id,saleItem:s},null,8,["saleItem"]))),128))]),_:1})]),_:1})]),_:1})]),_:1}),t(v,{class:"ion-padding ion-no-border"},{default:e(()=>[t($,{id:"configure-continue",disabled:!o.cartTotalCost,onClick:a[0]||(a[0]=s=>o.onContinue())},{default:e(()=>[d(l(o.$t("vendor.sales.recordSale")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})}const yo=M(co,[["render",mo]]);export{yo as default};
