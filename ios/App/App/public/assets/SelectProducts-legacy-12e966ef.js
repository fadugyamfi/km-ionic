System.register(["./index-legacy-cc225d81.js","./SaleStore-legacy-4abf2d58.js","./KolaYellowButton-legacy-095e43ab.js","./BusinessStore-legacy-6f130e52.js","./Image-legacy-0949e555.js","./ProductCard-legacy-6acd4b4f.js","./ProductStore-legacy-39217fc5.js","./Product-legacy-3e97f985.js","./Date-legacy-65bfc294.js","./index-legacy-92c3b46a.js","./index-legacy-d3e52be1.js","./CartStore-legacy-eb98406a.js","./Order-legacy-de27059d.js","./FavoriteButton.vue_vue_type_script_setup_true_lang-legacy-c3e7b736.js"],(function(e,t){"use strict";var o,n,l,a,s,d,r,c,u,i,h,I,f,g,m,v,S,_,p,y,C,b,w,x,P,B,j,k,T,E,L,$,A,F,H,z,G,K,R,Y,D,O,J,q,N,X,M,Q,U,V,W,Z,ee;return{setters:[e=>{o=e.d,n=e.a3,l=e.af,a=e.s,s=e.a,d=e.H,r=e.ad,c=e.J,u=e.q,i=e.a9,h=e.aa,I=e.ab,f=e.L,g=e.C,m=e._,v=e.x,S=e.o,_=e.c,p=e.w,y=e.e,C=e.g,b=e.t,w=e.aI,x=e.aJ,P=e.i,B=e.k,j=e.p,k=e.F,T=e.j,E=e.G,L=e.r,$=e.h,A=e.I,F=e.ax,H=e.aT,z=e.N,G=e.n,K=e.bd,R=e.ae,Y=e.m,D=e.v,O=e.f,J=e.ao,q=e.B,N=e.A,X=e.X,M=e.Y},e=>{Q=e.u},e=>{U=e.K},e=>{V=e.u},e=>{W=e.I},e=>{Z=e.P},e=>{ee=e.u},null,null,null,null,null,null,null],execute:function(){var t=document.createElement("style");t.textContent="ion-avatar[data-v-d61943c7]{height:48px;width:48px}ion-card-content[data-v-d61943c7]{padding:2px}\n",document.head.appendChild(t);const te=o({data:()=>({location:n,locationOutline:l,customer:null}),computed:{...a(V,Q,s)},components:{IonCard:d,IonAvatar:r,IonCardContent:c,IonLabel:u,Image:W,IonGrid:i,IonRow:h,IonCol:I,IonIcon:f},methods:{async loadSelectedCustomer(){try{const e=await this.businessStore.getBusinessCustomers(this.userStore.activeBusiness,300);this.customer=e.find((e=>e.id==this.saleStore.newSale.customer_id))}catch(e){g(e)}}},mounted(){this.loadSelectedCustomer()}}),oe=o({data:()=>({search:w,arrowBack:x,searchEnabled:!1,fetching:!1,products:[]}),mounted(){this.fetchProducts()},components:{IonPage:P,IonHeader:B,IonToolbar:j,IonButtons:k,IonBackButton:T,IonTitle:E,IonButton:L,IonIcon:f,IonFooter:$,KolaYellowButton:U,IonContent:A,SelectedCustomer:m(te,[["render",function(e,t,o,n,l,a){const s=v("Image"),d=v("IonAvatar"),r=v("IonCol"),c=v("IonLabel"),u=v("IonIcon"),i=v("IonRow"),h=v("IonGrid"),I=v("IonCardContent"),f=v("IonCard");return S(),_(f,null,{default:p((()=>[y(I,null,{default:p((()=>[y(h,null,{default:p((()=>[y(i,null,{default:p((()=>[y(r,{size:"auto"},{default:p((()=>[y(d,null,{default:p((()=>{var t;return[y(s,{src:null===(t=e.customer)||void 0===t?void 0:t.logo},null,8,["src"])]})),_:1})])),_:1}),y(r,{class:"d-flex ion-align-items-start ion-justify-content-center flex-column"},{default:p((()=>[y(c,{class:"fw-semibold"},{default:p((()=>{var t;return[C(b(null===(t=e.customer)||void 0===t?void 0:t.name),1)]})),_:1}),y(c,{class:"d-flex ion-align-items-center"},{default:p((()=>{var t;return[y(u,{icon:e.locationOutline},null,8,["icon"]),C(" "+b(null===(t=e.customer)||void 0===t?void 0:t.location),1)]})),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-d61943c7"]]),IonList:F,IonListHeader:H,IonLabel:u,IonItem:z,IonText:G,IonCheckbox:K,IonGrid:i,IonRow:h,IonCol:I,ProductCard:Z,IonSearchbar:R,IonSpinner:Y},computed:{...a(Q,ee,s)},methods:{async fetchProducts(e={}){this.fetching=!0;try{var t;const o={businesses_id:null===(t=this.userStore.activeBusiness)||void 0===t?void 0:t.id,limit:500,...e};this.products=await this.productStore.fetchProducts(o)}catch(o){g(o)}finally{this.fetching=!1}},isSelected(e){return this.saleStore.isProductSelected(e)},selectProduct(e){console.log(e),e.selected?this.saleStore.addProductToSale(e.product):this.saleStore.removeProductFromSale(e.product),console.log(this.saleStore.newSale)},onContinue(){var e;0!=(null===(e=this.saleStore.newSale.sale_items)||void 0===e?void 0:e.length)?this.$router.push("/vendor/sales/add-sale/configure-items"):D().showError(this.$t("vendor.sales.selectProductsToContinue"),"","bottom","select-products-continue")},toggleSearchEnabled(){this.searchEnabled=!this.searchEnabled},onSearch(e){this.fetchProducts({product_name_has:e.target.value})}}}),ne={class:"ion-padding",style:{"padding-bottom":"0.35em"}},le={key:0,class:"ion-text-center"};e("default",m(oe,[["render",function(e,t,o,n,l,a){const s=v("IonBackButton"),d=v("IonButtons"),r=v("IonTitle"),c=v("IonIcon"),u=v("IonButton"),i=v("IonToolbar"),h=v("IonSearchbar"),I=v("IonHeader"),f=v("IonLabel"),g=v("IonListHeader"),m=v("IonList"),w=v("SelectedCustomer"),x=v("IonSpinner"),P=v("ProductCard"),B=v("IonCol"),j=v("IonRow"),k=v("IonGrid"),T=v("IonContent"),E=v("KolaYellowButton"),L=v("IonFooter"),$=v("IonPage");return S(),_($,null,{default:p((()=>[O("section",ne,[y(I,{classs:"ion-no-border",style:{"box-shadow":"none"}},{default:p((()=>[y(I,{class:"inner-header"},{default:p((()=>[y(i,null,{default:p((()=>[y(d,{slot:"start"},{default:p((()=>[y(s,{defaultHref:"/vendor/sales/add-sale/select-customer",icon:e.arrowBack,mode:"md"},null,8,["icon"])])),_:1}),y(r,{size:"small"},{default:p((()=>[O("b",null,b(e.$t("vendor.sales.addSale")),1)])),_:1}),y(d,{slot:"end"},{default:p((()=>[y(u,{color:"dark",onClick:t[0]||(t[0]=t=>e.toggleSearchEnabled())},{default:p((()=>[y(c,{icon:e.search,color:"dark"},null,8,["icon"])])),_:1})])),_:1})])),_:1}),e.searchEnabled?(S(),_(i,{key:0},{default:p((()=>[y(h,{placeholder:e.$t("vendor.sales.searchProducts")+"...",class:"search-input",onKeyup:t[1]||(t[1]=J((t=>e.onSearch(t)),["enter"])),onIonChange:t[2]||(t[2]=t=>e.onSearch(t))},null,8,["placeholder"])])),_:1})):q("",!0)])),_:1}),y(m,{lines:"none",class:"sales-select-list ion-padding-horizontal",style:{"margin-bottom":"0px"}},{default:p((()=>[y(g,{class:"d-flex ion-justify-content-between"},{default:p((()=>[y(f,{class:"fw-bold"},{default:p((()=>[C(b(e.$t("vendor.sales.selectProducts")),1)])),_:1}),y(f,{class:"fw-bold ion-text-end",color:"medium"},{default:p((()=>{var t;return[C(b(e.$t("vendor.sales.itemsSelected",{total:null===(t=e.saleStore.newSale.sale_items)||void 0===t?void 0:t.length})),1)]})),_:1})])),_:1})])),_:1})])),_:1})]),y(T,null,{default:p((()=>[y(w),e.fetching?(S(),N("div",le,[y(x,{name:"crescent"})])):q("",!0),e.fetching?q("",!0):(S(),_(k,{key:1},{default:p((()=>[y(j,null,{default:p((()=>[(S(!0),N(M,null,X(e.products,(o=>(S(),_(B,{size:"6",key:o.id},{default:p((()=>[y(P,{product:o,showDescription:!1,showAddToCart:!1,showAddToFavorites:!1,showAddToSelected:!0,action:"toggleSelect","initially-selected":e.isSelected(o),onToggleSelect:t[3]||(t[3]=t=>e.selectProduct(t))},null,8,["product","initially-selected"])])),_:2},1024)))),128))])),_:1})])),_:1}))])),_:1}),y(L,{class:"ion-padding ion-no-border"},{default:p((()=>{var o;return[y(E,{id:"select-products-continue",disabled:0==(null===(o=e.saleStore.newSale.sale_items)||void 0===o?void 0:o.length),onClick:t[4]||(t[4]=t=>e.onContinue())},{default:p((()=>[C(b(e.$t("general.continue")),1)])),_:1},8,["disabled"])]})),_:1})])),_:1})}]]))}}}));
